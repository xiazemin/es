#### 4.1 curator安装

curator可以通过多种方式安装，具体取决于您的需求。

值得注意的是，Curator只需要安装在可访问Elasticsearch集群中机器上就可以运行。 它不需要安装在群集中的一个节点上。

我的机器是5.X版本，使用如下操作ok。

**Step1：安装：**

```

```

centos6/7用户更简洁：

```

```

**Step 2：升级至最新版本（非必须，根据自己需要）：**

```

```

验证执行成功方法1：

```

```

若成功，会显示索引信息。

#### 4.2 curator用法讲解

##### 4.2.1 用法1：curator\_cli 命令行

用法举例：curator\_cli 关闭全部一天前创建的索引名称为logs\_\*开头的索引。

```

```

`好处`：无需配置文件，一行命令即可成功。  
`坏处`：不能便捷的适应复杂的操作。

##### 4.2.2 用法2：curator命令行

用法举例：

```

```

解释：  
1、CONFIG.YML是配置文件，用于配置ES集群信息。  
CONFIG.YML样例：

```

```

核心配置：

> 1）集群IP；  
> 2）安全认证信息；  
> 3）日志信息。

2、ACTION\_FILE.YML 执行索引操作的配置信息  
由于支持的操作非常多，建议直接参考官网配置即可：

> http://t.cn/EGiLwyk
>
> http://t.cn/EGiL4EF

拿删除历史索引举例：

以下命令删除了30天前，以logs\_\*开头的索引。

```

```

如果执行多个任务怎么办呢？

注意：actions: 后面的，`依次类推`：

> 2：执行操作  
> 3：执行操作  
> 4：执行操作  
> N：执行操作

好处：1个配置搞定10+处操作，不费劲！

#### 4.3 curator 实践

经过4.2的配置，实践执行如下：

curator --config config.yml   指定路径/action.yml

#### 4.4 周期性执行

借助crontab，每天零点5分执行

```

```

加上如下的命令：

```

```

### 5、小结

* **切记：**  
  curator适用于`基于时间或者template其他方式创建的索引`，  
  **不适合单一索引存储N久历史数据的操作的场景**。



