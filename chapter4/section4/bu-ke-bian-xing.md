## 不可变性

写入磁盘的倒排索引是不可变的，它有如下好处：

```
1.不需要锁。如果从来不需要更新一个索引，就不必担心多个程序同时尝试修改。
2.一旦索引被读入文件系统的缓存(译者:在内存)，它就一直在那儿，因为不会改变。
只要文件系统缓存有足够的空间，大部分的读会直接访问内存而不是磁盘。这有助于性能提升。
3.在索引的声明周期内，所有的其他缓存都可用。它们不需要在每次数据变化了都重建，因为数据不会变。
4.写入单个大的倒排索引，可以压缩数据，较少磁盘IO和需要缓存索引的内存大小。

复制代码
```

当然，不可变的索引有它的缺点，首先是它不可变！你不能改变它。如果想要搜索一个新文档，必须重见整个索引。这不仅严重限制了一个索引所能装下的数据，还有一个索引可以被更新的频次。



